假设你用你的电脑去请求一个谷歌的页面
基本的步骤如下:
首先,你的电脑需要一个IP地址
就需要向DHCP服务器发送一个DHCP请求报文
你的电脑操作系统就会生成一个DHCP请求报文
该报文被封装在链路层的一个帧当中
该帧的源MAC地址是你电脑的MAC地址
目标MAC地址是48位全1的地址
经过路由器的传递(路由器抽取出IP数据报并上传给UDP
再从UDP报文段中抽取出请求报文
DHCP服务器收到了请求报文
DHCP服务器返回一个ACK报文
该报文中包含了给你电脑的IP地址以及DNS服务器的地址和子网掩码和默认网关路由器的地址
你接受到该ACK报文并抽取出相关的信息
之后就可以开始请求web页面了
在此之前,你需要知道请求对象的IP地址
你键入一个网站的名称之后
你的操作系统会生成一个DNS请求报文
该报文被封装成一个UDP报文段
UDP报文段被放入在一个具有源IP地址为你电脑的IP,目标IP为DNS服务器的IP地址中
该IP数据报被封装成一个帧开始进行传输
你需要通过路由器来传输该报文
所以你还要通过ARP协议来获取路由器的MAC地址
再把这个帧传到路由器上
最终转发到了DNS服务器上
并返回一个包含要请求主机的IP地址的回答报文
你的电脑收到该报文后准备请求该web页面了
你需要和生成一个TCP套接字用来发送get请求
在此之前你需要和对方的TCP进行三次握手
你生成一个TCP SYN的数据报
等该数据报传送到对方,并分解到对方的欢迎套接字
你们之间生成一个套接字,并且返回一个 TCP SYNACK给你,表示同意连接
等你收到之后你就可以开始发送你的HTTP请求报文了
之后你收到该HTTP响应报文后,此时Web页面就显示在你的面前了